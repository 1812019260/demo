<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.LawCaseBatchInfoMapper">

    <!--获取所有信息-->
    <select id="getAll" resultType="com.example.demo.bean.vo.LawCaseBatchInfoVo">
        SELECT
            batch_id 'batchId',
            batch_name 'batchName',
            batch_status 'batchStatus',
            create_time 'createTime',
            create_user_name 'createUserName',
            sender_email 'senderEmail',
            recipient_email 'recipientEmail',
            email_content_p 'emailContentP',
            email_send_time 'emailSendTime',
            download_name 'downloadName',
            download_count 'downloadCount',
            update_time 'updateTime',
            update_user_name 'updateUserName',
            is_sign 'isSign',
            remarks 'remarks'
        FROM law_case_batch_info WHERE 1=1
        <if test="dto.startTime != null and dto.startTime!=''" >
            creat_time &gt;= #{dto.startTime}
        </if>
        <if test="dto.endTime != null and dto.endTime!=''" >
            creat_time &lt;= #{dto.endTime}
        </if>
        <if test="dto.batchId != null and dto.batchId!=''" >
            batch_id = #{dto.batchId}
        </if>
        <if test="dto.batchName != null and dto.batchName!=''" >
            batch_name = #{dto.batchName}
        </if>
        <if test="dto.batchStatus != null and dto.batchStatus!=''" >
            batch_status = #{dto.batchStatus}
        </if>
        <if test="dto.senderEmail !=null and dto.senderEmail != ''">
            sender_email = #{dto.senderEmail}
        </if>
        <if test="dto.recipientEmail !=null and dto.recipientEmail != ''">
            recipient_email = #{dto.recipientEmail}
        </if>
        and is_delete = 0
    </select>

    <select id="getState" resultType="com.example.demo.bean.vo.LawCaseBatchInfoStateVo">
        SELECT
            batch_id 'batchId',
            batch_name 'batchName',
            if(is_sign = 0, '完成签章', '未完成签章') 'state'
        FROM law_case_batch_info WHERE 1=1
        <if test="dto.startTime != null and dto.startTime!=''" >
            creat_time &gt;= #{dto.startTime}
        </if>
        <if test="dto.endTime != null and dto.endTime!=''">
            creat_time &lt;= #{dto.endTime}
        </if>
        <if test="dto.batchId != null and dto.batchId!=''">
            batch_id = #{dto.batchId}
        </if>
        <if test="dto.batchName != null and dto.batchName!=''">
            batch_name = #{dto.batchName}
        </if>
        and is_delete = 0
        </select>

</mapper>
